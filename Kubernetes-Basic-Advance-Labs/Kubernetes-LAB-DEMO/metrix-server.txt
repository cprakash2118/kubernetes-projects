
kubectl delete deployment metrics-server -n kube-system
kubectl delete service metrics-server -n kube-system



kubectl delete clusterrole,clusterrolebinding,sa,configmap -l k8s-app=metrics-server -n kube-system



wget https://github.com/kubernetes-sigs/metrics-server/releases/download/v0.5.0/components.yaml

kubectl apply -f components.yaml

helm repo add bitnami https://charts.bitnami.com/bitnami
helm repo update

helm install metrics-server bitnami/metrics-server

helm install metrics-server bitnami/metrics-server -f values.yaml

kubectl get pods -n kube-system | grep metrics-server

kubectl get --raw "/apis/metrics.k8s.io/v1beta1/nodes"

##########
helm delete metrics-server -n kube-system

helm list -n kube-system  # List all releases in the 'kube-system' namespace
helm list --all-namespaces  # List releases across all namespaces if unsure where it was deployed

helm install metrics-server bitnami/metrics-server -n kube-system

helm install metrics-server bitnami/metrics-server -f values.yaml -n kube-system

kubectl get pods -n kube-system | grep metrics-server

#############
openssl x509 -in /etc/kubernetes/pki/apiserver.crt -text -noout | grep -A 1 "Subject Alternative Name"

sudo cp /etc/kubernetes/pki/apiserver.crt /etc/kubernetes/pki/apiserver.crt.backup
sudo cp /etc/kubernetes/pki/apiserver.key /etc/kubernetes/pki/apiserver.key.backup

sudo kubeadm init phase certs apiserver --apiserver-advertise-address=<apiserver-advertise-address> --apiserver-cert-extra-sans=<IP1,IP2,DNS1,DNS2>

sudo systemctl restart kubelet

kubectl delete pod -n kube-system -l k8s-app=metrics-server




